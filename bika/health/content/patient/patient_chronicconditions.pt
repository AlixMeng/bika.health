<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:tal="http://xml.zope.org/namespaces/tal"
	xmlns:metal="http://xml.zope.org/namespaces/metal"
	xmlns:i18n="http://xml.zope.org/namespaces/i18n"
	metal:use-macro="here/main_template/macros/master" i18n:domain="bika">
<body class="template-chronicconditions">

	<metal:content-core fill-slot="content-core">
    <form name="chronicconditions" method="POST">
		<div id="folderlisting-main-table">
            <input tal:replace="structure context/@@authenticator/authenticator" />
            <input type="hidden" name="submitted" value="1"/>
			<div class="bika-listing-table-container">
				<table summary="Content listing" style="margin-bottom: 0px;"
					class="bika-listing-table">
					<thead>
						<tr>
							<th>&nbsp;</th>
                            <th class="sortable column"
                                id="foldercontents-Code-column">
                                <span i18n:translate="">ICD Code</span>
                            </th>
                            <th class="sortable column"
                                id="foldercontents-Title-column">
                                <span i18n:translate="">Disease</span>
                                <span class="fieldRequired">&nbsp;</span>
                            </th>
                            <th class="sortable column"
                                id="foldercontents-Description-column">
                                <span i18n:translate="">Description</span>
                            </th>
                            <th class="sortable column"
                                id="foldercontents-Onset-column">
                                <span i18n:translate="">Onset</span>
                            </th>
                            <th class="sortable column"
                                id="foldercontents-End-column">
                                <span i18n:translate="">End</span>
                            </th>
						</tr>
					</thead>

					<tbody class="item-listing-tbody"
						tal:define="global index python:-1">
                        <tr tal:repeat="row context/getChronicConditions">
                        	<td>
                            	<input class="noborder" type="checkbox"
                            		name="SelectItem" id="SelectItem"
                            		tal:define="global index python:index+1;"
                            		tal:attributes="
                            			id python:'SelectItem-%s'%(index);
                            			name python:'SelectItem-%s'%(index);"/>
                            </td>
                            <td colspan="1" rowspan="1" class="state-active Code">
                                 <span tal:content="row/Code"/>
                            </td>
                            <td colspan="1" rowspan="1" class="state-active Title">
                                 <span tal:content="row/Title"/>
                            </td>
                            <td colspan="1" rowspan="1" class="state-active Description">
                                 <span tal:content="row/Description"/>
                            </td>
                            <td colspan="1" rowspan="1" class="state-active Onset">
                                 <span tal:content="row/Onset"/>
                            </td>
                            <td colspan="1" rowspan="1" class="state-active End">
                                 <span tal:content="python:row.get('End', '')"/>
                            </td>
                        </tr>
                        <tr id="new">
                        	<td style="padding-bottom:15px;">&nbsp;</td>
                            <td colspan="1" rowspan="1" class="state-active Code">
                                 <input class="wide" id="Code" type="text" value="" autocomplete="off" readonly="true"/>
                            </td>
                            <td colspan="1" rowspan="1" class="state-active Title">
                                 <input class="wide" id="Title" type="text" value="" autocomplete="off"/>
                            </td>
                            <td colspan="1" rowspan="1" class="state-active Description">
                                 <input class="wide" id="Description" type="text" value="" autocomplete="off" readonly="true"/>
                            </td>
                            <td colspan="1" rowspan="1" class="state-active Onset">
                                 <input class="datepicker_nofuture" id="Onset" type="text" value="" autocomplete="off"/>
                            </td>
                            <td colspan="1" rowspan="1" class="state-active End">
                                 <input class="datepicker_nofuture" id="End" type="text" value="" autocomplete="off"/>
                            </td>
					</tbody>
					<tfoot>
						<tr>
							<td class="noborder workflow_actions" colspan="6"  style="padding:5px;">
								<input class="action_button add_row allowMultiSubmit"
								       type="submit"
									   i18n:attributes="value"
									   value="Add" />
								<tal:hastreatments tal:condition="python:hasattr(view, 'hasChronicConditions') and view.hasChronicConditions()">
									<input class="action_button" type="submit"
										name="delete"
										i18n:attributes="value" value="Delete selected" />
									<input class="action_button" type="submit"
										name="clear"
										i18n:attributes="value" value="Delete all" />
								</tal:hastreatments>
						   </td>
						</tr>
					</tfoot>
				</table>
			</div>
		</div>
		<input class="action_button" type="submit"
			i18n:attributes="value" value="Save past medical history" />

		<tal:hasremarks tal:condition="python:hasattr(context, 'Remarks')">
			<tal:remarks
				define="
			field python:context.Schema()['Remarks'];
			errors python:{};">
				<p style="margin-top: 2em;" />
				<metal:widget
					use-macro="python:context.widget('Remarks', mode='edit')" />
			</tal:remarks>
		</tal:hasremarks>
    </form>
	</metal:content-core>

</body>
</html>

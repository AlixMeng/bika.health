<div>
    <label i18n:translate=""> Account to </label>

    <!-- Choose if the patient is the same as the guarantor -->
    <div>
        <div id="archetypes-fieldname-PatientAsGuarantor" class="field ArchetypesBooleanWidget " data-fieldname="PatientAsGuarantor">
            <label class="formQuestion" for="PatientAsGuarantor"> Patient as guarantor</label>
            <input id="PatientAsGuarantor" class="noborder" type="checkbox" name="PatientAsGuarantor:boolean" value="on"/>
            <input type="hidden" name="PatientAsGuarantor:boolean:default" value="true" originalvalue="">
        </div>
    </div>

    <!-- If the patient and the guarantor is the same person and the patient already exists, the following fields will be fill out with the existing patient's data -->
    <!-- Insurance Number -->
    <div>
        <div  id="archetypes-fieldname-GuarantorID" class="field ArchetypesStringWidget" data-fieldname="GuarantorID">
            <label class="formQuestion" for="GuarantorID" i18n:translate=""> Guarantor ID Number </label>
            <span id="GuarantorID_help" class="formHelp">The ID number (Insurance Number) from the person whose contract cover the current patient.</span>
            <input id="GuarantorID"
                   class="blurrable firstToFocus"
                   type="text"
                   placeholder=""
                   name="GuarantorID"
                   originalvalue=""/>
        </div>
    </div>

    <!-- Insurance company selector -->
    <div>

        <div class="field ArchetypesReferenceWidget" data-fieldname="InsuranceCompany" id="archetypes-fieldname-InsuranceCompany">
            <label class="formQuestion" for="InsuranceCompany" i18n:translate="">Insurance Company</label>
            <span></span>
            <div class="fieldErrorBox"></div>

            <input type="text"
                   name="ar.0.InsuranceCompany:record"
                   id="ar_0_InsuranceCompany"
                   class="blurrable firstToFocus referencewidget ui-autocomplete-input input-bg"
                   size="20"
                   minlength="0"
                   search_query="{}"
                    tal:attributes="base_query python:view.get_json_format({'portal_type': ['InsuranceCompany'], 'inactive_state': 'active'});
                    combogrid_options python:view.get_json_format({'colModel': [{'columnName': 'Title', 'label': 'Insurance Company', 'width': '40'}, {'columnName': 'UID', 'hidden': True}], 'minLength': '0', 'search_fields': ['Title'], 'sord': 'asc', 'discard_empty': [], 'searchIcon': True, 'sidx': 'Title', 'url': 'referencewidget_search', 'resetButton': False, 'width': '550px', 'showOn': True, 'force_all': True});"
                   ui_item="Title"
                   catalog_name="bika_setup_catalog"
                   resetbutton="False"
                   maxlength="255"
                   searchicon="True"
                   showon="True"
                   placeholder="" />
            <input type="hidden" name="InsuranceCompany_uid" id="InsuranceCompany_uid" />
        </div>

    </div>

    <!-- If the patient and the guarantor is the same person, the following fields will be fill out with the patient's data -->

    <div id="archetypes-fieldname-GuarantorSurname" class="field ArchetypesStringWidget " data-fieldname="GuarantorSurname">
        <span></span>
        <label class="formQuestion" for="GuarantorSurname">Guarantor's Surname</label>
        <div class="fieldErrorBox"></div>
        <input id="GuarantorSurname"
               class="blurrable firstToFocus"
               type="text"
               placeholder=""
               maxlength="255"
               name="GuarantorSurname"
               originalvalue="">
    </div>

    <div id="archetypes-fieldname-GuarantorFirstname" class="field ArchetypesStringWidget" data-fieldname="GuarantorFirstname">
        <span></span>
        <label class="formQuestion" for="GuarantorFirstname">Guarantor's First Name</label>
        <div class="fieldErrorBox"></div>
        <input id="GuarantorFirstname" class="blurrable firstToFocus" type="text" placeholder="" maxlength="255" value="" name="GuarantorFirstname" originalvalue="">
    </div>

    <!-- Rendering the whole widget -->
    <!--div>
        <tal:fields tal:define="field_macro here/widgets/field/macros/view; field python:here.Schema()['maintext']">

            <tal:if_visible define="mode string:view;
                          visState python:field.widget.isVisible(here, mode);
                          visCondition python:field.widget.testCondition(context.aq_inner.aq_parent, portal, context);"
                            condition="python:visState == 'visible' and visCondition">
                <metal:use_field use-macro="field_macro" />
            </tal:if_visible>
        </tal:fields>
    </div-->

    <div id="archetypes-fieldname-GuarantorBusinessPhone" class="field ArchetypesStringWidget " data-fieldname="GuarantorBusinessPhone">
        <span></span>
        <label class="formQuestion" for="GuarantorBusinessPhone">
            Guarantor's Phone (business)
        </label>
        <div class="fieldErrorBox"></div>
        <input id="GuarantorBusinessPhone" class="blurrable firstToFocus" type="text" placeholder="" maxlength="255" value="" name="GuarantorBusinessPhone" originalvalue="">
    </div>


    <div id="archetypes-fieldname-GuarantorHomePhone" class="field ArchetypesStringWidget " data-fieldname="GuarantorHomePhone">
        <span></span>
        <label class="formQuestion" for="GuarantorHomePhone">
            Guarantor's Phone (home)
        </label>
        <div class="fieldErrorBox"></div>
        <input id="GuarantorHomePhone" class="blurrable firstToFocus" type="text" placeholder="" maxlength="255" value="" name="GuarantorHomePhone" originalvalue="">
    </div>

    <div id="archetypes-fieldname-GuarantorMobilePhone" class="field ArchetypesStringWidget " data-fieldname="GuarantorMobilePhone">
        <span></span>
        <label class="formQuestion" for="GuarantorMobilePhone">
            Guarantor's Phone (mobile)
        </label>
        <div class="fieldErrorBox"></div>
        <input id="GuarantorMobilePhone" class="blurrable firstToFocus" type="text" placeholder="" maxlength="255" value="" name="GuarantorMobilePhone" originalvalue="">
    </div>

</div>


